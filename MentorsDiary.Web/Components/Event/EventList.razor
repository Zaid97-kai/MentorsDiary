@page "/events"

<AuthorizeView Roles="Administrator">
    <Authorized>
        <br />
        <div class="border border-primary border-1 rounded-2 p-2">
            <MentorsDiary.Web.Components.Displays.PageTitle Title="Заместители директоров" Count="@Events?.Count" Loading="_isLoading">

                <AntDesign.Button OnClickStopPropagation="true"
                                  Class="mb-2"
                                  Type="@ButtonType.Link"
                                  Icon="plus"
                                  Size="small"
                                  OnClick="async () => await CreateDeputyDirectorAsync()">
                    Добавить
                </AntDesign.Button>
                
                <BodySearchBarRangeDate OnSelectedItemChangedHandler="UpdateList"
                                        OnClearHandler="UpdateListAfterClearDatePicker"
                                        OnSearchItemChangedHandler="SearchList" />

            </MentorsDiary.Web.Components.Displays.PageTitle>

            @if (Events != null)
            {
                @foreach (var data in Events)
                {
                    <MentorsDiary.Web.Components.Displays.BoxCard>
                        <Body>
                            <div class="row">
                                <div class="col">
                                    <div class="text-label">Наименование</div>
                                    <div>@data.Name</div>
                                </div>
                                <div class="col">
                                    <div class="text-label">Описание</div>
                                    <div>@data.Comment</div>
                                </div>
                                <div class="col">
                                    <div class="text-label">Дата проведения</div>
                                    <div>@data.DateEvent</div>
                                </div>
                            </div>
                        </Body>
                        <ActionTemplate>
                            <Space Size="@("2")">
                                <SpaceItem>
                                    <AntDesign.Button OnClickStopPropagation="true" Danger
                                                      Type="@ButtonType.Link"
                                                      Size="small" OnClick="async () => await RemoveAsync(data)">
                                        <Icon Type="@IconType.Outline.Delete" />
                                    </AntDesign.Button>
                                </SpaceItem>
                                <SpaceItem>
                                    <AntDesign.Button OnClickStopPropagation="true"
                                                      Type="@ButtonType.Link"
                                                      Size="small" OnClick="() => UpdateAsync(data)">
                                        <Icon Type="@IconType.Outline.Edit" />
                                    </AntDesign.Button>
                                </SpaceItem>
                            </Space>
                        </ActionTemplate>
                    </MentorsDiary.Web.Components.Displays.BoxCard>
                }
            }
        </div>
    </Authorized>
    <NotAuthorized>
        Доступ ограничен.
    </NotAuthorized>
</AuthorizeView>